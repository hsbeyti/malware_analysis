import subprocess

def delete_snapshot_cli(vm_name, snapshot_uuid):
    """
    Deletes a VirtualBox snapshot using VBoxManage CLI.

    Parameters:
        vm_name (str): Name of the virtual machine.
        snapshot_uuid (str): UUID of the snapshot to be deleted.
    """
    try:
        # Command to delete the snapshot
        # Replace this with the full path to VBoxManage executable
        vboxmanage_path = r"C:\Program Files\Oracle\VirtualBox\VBoxManage.exe"  # Windows example

        cmd = [vboxmanage_path, "snapshot", vm_name, "delete", snapshot_uuid]
        print(f"Executing command: {' '.join(cmd)}")

        # Run the command
        subprocess.run(cmd, check=True)
        print(f"Snapshot '{snapshot_uuid}' deleted successfully for VM '{vm_name}'.")
    except subprocess.CalledProcessError as e:
        # Handle errors during command execution
        print(f"Error during CLI snapshot deletion: {e}")
    except FileNotFoundError:
        # Handle case where VBoxManage is not found
        print("VBoxManage not found. Ensure VirtualBox is installed and VBoxManage is in your PATH.")

def main():
    """
    Main function to delete a VirtualBox snapshot with hardcoded values.
    """
    # Hardcoded values for VM name and snapshot UUID
    vm_name = "malware_analysis"  # Example VM name
    snapshot_uuid = "19681490-9adc-4cc1-b461-7ea4f4d9d3a4"  # Example Snapshot UUID

    print("VirtualBox Snapshot Deletion Tool")
    print("----------------------------------")
    print(f"VM Name: {vm_name}")
    print(f"Snapshot UUID: {snapshot_uuid}")

    # Call the delete_snapshot_cli function with hardcoded values
    delete_snapshot_cli(vm_name, snapshot_uuid)

if __name__ == "__main__":
    main()
